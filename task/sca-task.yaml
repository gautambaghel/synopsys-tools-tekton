apiVersion: tekton.dev/v1alpha1
kind: Task
metadata:
  name: sca
spec:
  workspaces:
  - name: maven-repo
  params:
    - name: Url
      description: The Solution URL
      type: string
    - name: Token
      description: The Solution Token
      type: string
    - name: detectArguments
      description: The arguments for detect scan
      type: array
  resources: 
    inputs:
      - name: source
        type: git
  steps:
    - name: scan
      image: docker.io/gautambaghel/synopsys-detect:mvn
      workingDir: /workspace/source
      args:
        - --detect.source.path="/workspace/source"
        - --blackduck.url="$(params.Url)"
        - --blackduck.api.token="$(params.Token)"
        - $(params.detectArguments)